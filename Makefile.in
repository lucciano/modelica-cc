CXXFLAGS = -DYY_MCC_Parser_DEBUG -I. -g
OBJS := parser/mocc_parser.o \
        main.o \
        parser/mocc_scanner.o \
        ast/ast_builder.o \
        ast/ast_node.o \
        ast/class.o  \
        ast/composition.o \
        ast/element.o \
        ast/equation.o \
        ast/expression.o \
        ast/modification.o \
        ast/statement.o \
        ast/stored_definition.o  \
        parser/parse.o 

OBJS_MMO := parser/mocc_parser.o \
            mmo/main.o \
            mmo/traverse_example.o \
            mmo/mmo_class.o \
            parser/mocc_scanner.o \
            ast/ast_builder.o \
            ast/ast_node.o \
            ast/class.o  \
            ast/composition.o \
            ast/element.o \
            ast/equation.o \
            ast/expression.o \
            ast/modification.o \
            ast/statement.o \
            ast/stored_definition.o  \
            parser/parse.o \
            util/ast_util.o


%.o: %.cpp %.h
	$(CXX) -c $(CXXFLAGS) $*.cpp -o $*.o

all:mocc mmo

test: all
	./mocc examples/mocc.mo

docs:
	doxygen 

parser/mocc_parser.cpp: parser/mocc.y
	@BISONXX@ -t -d -v -hparser/mocc_parser.h -o parser/mocc_parser.cpp parser/mocc.y

parser/mocc_scanner.cpp: parser/mocc.lex parser/mocc_parser.cpp
	@FLEXXX@ -d -oparser/mocc_scanner.cpp parser/mocc.lex

mocc: $(OBJS)
	@CXX@ $(CXXFLAGS) -o mocc $(OBJS)

mmo: $(OBJS_MMO)
	@CXX@ $(CXXFLAGS) -o mmo/mmo $(OBJS_MMO)
clean:
	rm -rf $(OBJS) mocc parser/mocc_parser.cpp parser/mocc_scanner.cpp parser/mocc_parser.h mmo/mmo



	
